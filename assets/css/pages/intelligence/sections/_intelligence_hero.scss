.intelligence-hero .hero-background {
    opacity: .18;
}

.intelligence-hero .intelligence-hero-background {
    position: absolute;
    inset: 0;
    display: block;
    pointer-events: none;
    z-index: 0;
    /* Apply fade mask to background wrapper so grid and scanning line both fade */
    -webkit-mask-image: radial-gradient(closest-side at 50% 50%, rgba(255, 255, 255, 1) var(--grid-fade-start, 70%), rgba(255, 255, 255, 0) var(--grid-fade-end, 100%));
    mask-image: radial-gradient(closest-side at 50% 50%, rgba(255, 255, 255, 1) var(--grid-fade-start, 70%), rgba(255, 255, 255, 0) var(--grid-fade-end, 100%));
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-position: center;
    mask-position: center;
    -webkit-mask-size: 100% 100%;
    mask-size: 100% 100%;
}

.intelligence-hero {
    /* Fixed-size square cells for the grid */
    --grid-cell: 300px;
    --grid-line: 2px;
    --grid-color: rgba(59, 130, 246, 0.1); /* crisp line */
    --grid-glow-color: rgba(59, 130, 246, 0.1); /* soft glow */
    --grid-glow-size: 8px;
    /* Edge fade control (mask) */
    --grid-fade-start: 70%;
    --grid-fade-end: 100%;
}

.intelligence-hero .threat-grid {
    position: absolute;
    inset: 0;
    display: block;
    pointer-events: none;
    z-index: 0;
    /* Square grid that reveals more/less on resize without shifting */
    background-position: 0 0;
    background-size: var(--grid-cell) var(--grid-cell);
    background-image:
        /* crisp vertical lines */
        repeating-linear-gradient(
            to right,
            var(--grid-color) 0 var(--grid-line),
            transparent var(--grid-line) var(--grid-cell)
        ),
        /* crisp horizontal lines */
        repeating-linear-gradient(
            to bottom,
            var(--grid-color) 0 var(--grid-line),
            transparent var(--grid-line) var(--grid-cell)
        ),
        /* glow vertical */
        repeating-linear-gradient(
            to right,
            var(--grid-glow-color) 0 var(--grid-glow-size),
            transparent var(--grid-glow-size) var(--grid-cell)
        ),
        /* glow horizontal */
        repeating-linear-gradient(
            to bottom,
            var(--grid-glow-color) 0 var(--grid-glow-size),
            transparent var(--grid-glow-size) var(--grid-cell)
        );
    /* Fade out grid towards edges on both axes */
    -webkit-mask-image: radial-gradient(closest-side at 50% 50%, rgba(255, 255, 255, 1) var(--grid-fade-start), rgba(255, 255, 255, 0) var(--grid-fade-end));
    mask-image: radial-gradient(closest-side at 50% 50%, rgba(255, 255, 255, 1) var(--grid-fade-start), rgba(255, 255, 255, 0) var(--grid-fade-end));
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-position: center;
    mask-position: center;
    -webkit-mask-size: 100% 100%;
    mask-size: 100% 100%;
}

.intelligence-hero .scanning-line {
    position: absolute;
    top: 0;
    bottom: 0;
    left: -100%;
    width: 2px;
    z-index: 1;
    background: linear-gradient(180deg, transparent, #3b82f6aa, transparent);
    opacity: .50;
    animation: scan 4s linear infinite;
}

/* removed explicit .grid-line positions in favor of dynamic square grid background */

.intelligence-hero .highlight-text {
    color: rgba(147, 197, 253, 1);
    text-shadow: 0 0 20px rgba(147, 197, 253, 0.3);
    animation: intelligencePulse 3s ease-in-out infinite;
}

/* Removed manual grid line positioning in favor of repeating gradients */

@keyframes scan {
    0% {
        left: -100%;
    }
    100% {
        left: 100%;
    }
}

@keyframes pulse-threat {
    0%, 100% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.5);
        opacity: 0.7;
    }
}

@keyframes intelligencePulse {
    0%, 100% { text-shadow: 0 0 20px rgba(147, 197, 253, 0.3); }
    50% { text-shadow: 0 0 30px rgba(147, 197, 253, 0.6), 0 0 40px rgba(147, 197, 253, 0.2); }
}

/* Optional: tweak grid density on smaller screens if desired */
@media (max-width: 768px) {
    .intelligence-hero { --grid-cell: 64px; }
}

@media (max-width: 480px) {
    .intelligence-hero { --grid-cell: 56px; }
}